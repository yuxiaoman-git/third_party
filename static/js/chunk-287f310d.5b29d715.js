(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-287f310d"],{"07ac":function(e,t,a){var l=a("23e7"),n=a("6f53").values;l({target:"Object",stat:!0},{values:function(e){return n(e)}})},"09f4":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),Math.easeInOutQuad=function(e,t,a,l){return e/=l/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function n(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function i(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function r(e,t,a){var r=i(),o=e-r,u=20,s=0;t="undefined"===typeof t?500:t;var c=function e(){s+=u;var i=Math.easeInOutQuad(s,r,o,t);n(i),s<t?l(e):a&&"function"===typeof a&&a()};c()}},"55bd":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",["radio"===e.el?a("el-radio-group",{attrs:{disabled:e.disabled,size:"mini"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(t){return a("el-radio",{key:t.value,attrs:{disabled:t.disabled,label:t.value}},[e._v(e._s(t.label))])})),1):e._e(),"checkbox"===e.el?a("el-checkbox-group",{attrs:{size:"mini"},on:{change:e.handelChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(t){return a("el-checkbox",{key:t.value,attrs:{label:t.value,disabled:t.disabled}},[e._v(e._s(t.label))])})),1):e._e(),"select"===e.el?a("el-select",{style:{width:e.width},attrs:{filterable:"",clearable:e.clearable,disabled:e.disabled,placeholder:"请选择",loading:e.loading,multiple:e.multiple,"collapse-tags":e.collapseTags},on:{change:e.handelChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value,disabled:t.disabled}},[t.hint?a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.hint,placement:"right"}},[a("div",[e._v(e._s(t.label))])]):e._e()],1)})),1):e._e()],1)},n=[],i=a("2909"),r=a("c7eb"),o=a("1da1"),u=a("b85c"),s=(a("d81d"),a("4de4"),a("d3b7"),a("7db0"),a("caad"),a("2532"),a("99af"),a("795d")),c={name:"SelectItme",model:{prop:"give",event:"returnBack"},props:{give:{type:[Object,Array],default:function(){return null}},width:{type:String,default:function(){return"60%"}},type:{type:String,default:function(){return""}},multiple:{type:Boolean,default:function(){return!1}},collapseTags:{type:Boolean,default:function(){return!1}},disabled:{type:Boolean,default:function(){return!1}},clearable:{type:Boolean,default:function(){return!0}},platform:{type:Boolean,default:function(){return!1}},el:{type:String,default:function(){return"select"}},tab:{type:String,default:function(){return""}}},data:function(){return{options:[{value:!0,label:"是"},{value:!1,label:"否"}],loading:!1}},computed:{value:{get:function(){return this.multiple?this.give&&this.give.map((function(e){return e.value}))||[]:this.give&&this.give.value},set:function(e){if(!this.multiple){var t,a=Object(u["a"])(this.options);try{for(a.s();!(t=a.n()).done;){var l=t.value;if(l.value===e)return this.$emit("returnBack",l)}}catch(i){a.e(i)}finally{a.f()}return this.$emit("returnBack",null)}var n=this.options.filter((function(t){return e.find((function(e){return t.value===e}))}));this.$emit("returnBack",n)}}},mounted:function(){this.getOptions()},methods:{getOptions:function(){var e=this;return Object(o["a"])(Object(r["a"])().mark((function t(){var a,l,n;return Object(r["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.options=[],a=e.type,l=e.platform,n=s["a"][a]||s["a"]["default"],e.loading=!0,t.next=6,n({type:a,platform:l});case 6:if(t.t0=t.sent,t.t0){t.next=9;break}t.t0=[];case 9:e.options=t.t0,"checkbox"===e.el&&e.$emit("renderComplete"),e.loading=!1;case 12:case"end":return t.stop()}}),t)})))()},handelChange:function(e){var t=this.options.filter((function(t){return Array.isArray(e)?e.includes(t.value):t.value==e}));this.multiple?this.$emit("change",t):this.$emit.apply(this,["change"].concat(Object(i["a"])(t)))}}},d=c,b=a("2877"),v=Object(b["a"])(d,l,n,!1,null,null,null);t["a"]=v.exports},"6a26":function(e,t,a){},"6f53":function(e,t,a){var l=a("83ab"),n=a("df75"),i=a("fc6a"),r=a("d1e7").f,o=function(e){return function(t){var a,o=i(t),u=n(o),s=u.length,c=0,d=[];while(s>c)a=u[c++],l&&!r.call(o,a)||d.push(e?[a,o[a]]:o[a]);return d}};e.exports={entries:o(!0),values:o(!1)}},"75e9":function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return n}));a("fb6a");var l=[{value:"REGION",label:"区域"},{value:"PCWEB",label:"平台"},{value:"IPTV",label:"IPTV"},{value:"OTT",label:"OTT"},{value:"SOTT",label:"专网OTT"},{value:"DTV",label:"数字电视"},{value:"TV",label:"电视台"},{value:"AUDIO",label:"音频平台"}],n=l.slice(1)},"7db0":function(e,t,a){"use strict";var l=a("23e7"),n=a("b727").find,i=a("44d2"),r=a("ae40"),o="find",u=!0,s=r(o);o in[]&&Array(1)[o]((function(){u=!1})),l({target:"Array",proto:!0,forced:u||!s},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),i(o)},"87e1":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",[a("el-form",{staticClass:"searchBar",staticStyle:{display:"flex",width:"100%"},attrs:{inline:!0,model:e.formInline},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"媒体名称"}},[a("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"请输入媒体名称",clearable:""},model:{value:e.formInline.media_name,callback:function(t){e.$set(e.formInline,"media_name",t)},expression:"formInline.media_name"}})],1),a("el-form-item",{attrs:{label:"合作商"}},[a("SelectItem",{attrs:{type:"cooperative",width:"140px"},model:{value:e.formInline.partner,callback:function(t){e.$set(e.formInline,"partner",t)},expression:"formInline.partner"}})],1),a("el-form-item",{attrs:{label:"定时日期"}},[a("el-date-picker",{staticStyle:{width:"140px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.formInline.datetime,callback:function(t){e.$set(e.formInline,"datetime",t)},expression:"formInline.datetime"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary","native-type":"submit"},on:{click:function(t){return e.handleQuery()}}},[e._v("查询 ")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","header-cell-style":{textAlign:"center"},"cell-style":{textAlign:"center"}}},[a("el-table-column",{attrs:{prop:"id",label:"任务ID"}}),a("el-table-column",{attrs:{prop:"media_name",label:"媒体名称"}}),a("el-table-column",{attrs:{prop:"name",label:"文件名"}}),a("el-table-column",{attrs:{prop:"datetime",label:"定时时间"}}),a("el-table-column",{attrs:{prop:"partner.name",label:"注入平台"}}),a("el-table-column",{attrs:{prop:"level_name",label:"状态"}}),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间"}}),a("el-table-column",{attrs:{label:"操作",width:"120",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[a("div",{staticClass:"operate-btn"},[e.$checkPermission(["edit"])?a("span",{on:{click:function(t){return e.handleEdit(l)}}},[e._v("修改")]):e._e(),e.$checkPermission(["delete"])?a("span",{on:{click:function(t){return e.handleDel(l)}}},[e._v("删除")]):e._e()])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit,layout:"sizes, prev, pager, next, jumper"},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}}),e.dialogVisible?a("el-dialog",{attrs:{title:"修改",visible:e.dialogVisible,"close-on-click-modal":!1,"custom-class":"custom-dialog",width:"500px",top:"20px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editFormRules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"定时时间",prop:"datetime"}},[a("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss","picker-options":e.pickerOptions,placeholder:"选择日期时间"},model:{value:e.editForm.datetime,callback:function(t){e.$set(e.editForm,"datetime",t)},expression:"editForm.datetime"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editCronTask("injectRuleForm")}}},[e._v("确 定")])],1)],1):e._e()],1)},n=[],i=a("c7eb"),r=a("1da1"),o=(a("e9c4"),a("333d")),u=a("55bd"),s=a("5f87"),c={media_name:"",datetime:"",partner:null},d={datetime:""},b={name:"timingList",components:{Pagination:o["a"],SelectItem:u["a"]},data:function(){return{total:0,listQuery:{page:1,limit:20},loading:!1,form:{},tableData:[],formInline:JSON.parse(JSON.stringify(Object.assign({},c))),editForm:JSON.parse(JSON.stringify(Object.assign({},d))),editFormRules:{datetime:[{required:!0,message:"请选择图片",trigger:"blur"}]},dialogVisible:!1,pickerOptions:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},editObj:{}}},mounted:function(){this.cronList()},methods:{getList:function(){this.cronList()},handleQuery:function(){this.listQuery.page=1,this.cronList()},cronList:function(){var e=this;return Object(r["a"])(Object(i["a"])().mark((function t(){var a,l,n,r,o,u,s,c;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.listQuery,l=a.page,n=a.limit,r=e.formInline,o=r.media_name,u=r.partner,s=r.datetime,e.loading=!0,t.next=4,e.$store.dispatch("injector/cronList",{partner_id:u&&u.value,media_name:o,datetime:s,page:l,page_size:n});case 4:c=t.sent,e.loading=!1,0===c.code&&(e.tableData=c.data&&c.data.data_list||[],e.total=c.data.total_item);case 7:case"end":return t.stop()}}),t)})))()},handleEdit:function(e){this.dialogVisible=!0,this.editObj=e},handleDel:function(e){var t=this;this.$confirm("确认要删除吗?","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",type:"warning"}).then(Object(r["a"])(Object(i["a"])().mark((function a(){var l;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("injector/deleteCronTask",{level:e.level,task_id:e.id});case 2:if(l=a.sent,!l||0!==l.code){a.next=7;break}return t.$message.success("删除成功"),a.next=7,t.cronList();case 7:case"end":return a.stop()}}),a)})))).catch((function(){}))},editCronTask:function(){var e=this;return Object(r["a"])(Object(i["a"])().mark((function t(){return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.editForm.validate(function(){var t=Object(r["a"])(Object(i["a"])().mark((function t(a){var l,n,r,o,u,c,d,b,v,f,m,p;return Object(i["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=16;break}return e.loading=!0,l=Object(s["a"])("userInfo")||{},n=l.sid,r=void 0===n?"":n,o=l.uid,u=void 0===o?0:o,c=e.editObj,d=c.level,b=c.id,v=e.editForm.datetime,f={level:d,task_id:b,datetime:v},m={sid:r,uid:u},t.next=9,e.$store.dispatch("injector/editCronTask",{body:f,params:m});case 9:if(p=t.sent,e.loading=!1,0!==p.code){t.next=16;break}return e.$message.success("修改成功"),e.dialogVisible=!1,t.next=16,e.cronList();case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}}},v=b,f=(a("e0af"),a("2877")),m=Object(f["a"])(v,l,n,!1,null,"018eb5f7",null);t["default"]=m.exports},e0af:function(e,t,a){"use strict";a("6a26")},efeca:function(e,t,a){"use strict";a.d(t,"i",(function(){return l})),a.d(t,"k",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return o})),a.d(t,"f",(function(){return u})),a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"g",(function(){return d})),a.d(t,"j",(function(){return b})),a.d(t,"h",(function(){return p})),a.d(t,"l",(function(){return h}));var l=[{value:"movie",label:"电影"},{value:"tvseries",label:"电视剧"},{value:"animation",label:"动漫"},{value:"animation_movie",label:"动漫电影"},{value:"web_movie",label:"网络电影"},{value:"sport",label:"体育"},{value:"travel",label:"旅游"},{value:"web_tv",label:"网剧"},{value:"variety",label:"综艺"},{value:"education",label:"教育"},{value:"mother_baby",label:"母婴"},{value:"game",label:"游戏"},{value:"short_film",label:"短片"},{value:"documentary",label:"纪录片"},{value:"square_dance",label:"广场舞"},{value:"SPECIAL_COLUMN",label:"专栏题目"},{value:"children",label:"儿童"},{value:"opera",label:"戏曲"},{value:"LIFE",label:"生活"},{value:"FILM",label:"影视"}],n=[{value:"剧场版",label:"剧场版"},{value:"TV版",label:"TV版"},{value:"真人版",label:"真人版"},{value:"DVD版",label:"DVD版"}],i=[{value:"Ⅰ",label:"适合任何年龄的人观看"},{value:"Ⅱ",label:"13岁以下不宜观看"},{value:"ⅡA",label:"13岁以下，建议有家长陪同观看"},{value:"ⅡB",label:"18岁以下，建议有家长陪同观看"},{value:"Ⅲ",label:"18岁以上"}],r=[{value:1,label:"仅包含H.264"},{value:2,label:"仅包含H.265"},{value:3,label:"包含H.264和H.265"}],o=[{value:"1",label:"正片"},{value:"2",label:"片花"},{value:"3",label:"预告片"},{value:"4",label:"其他"}],u=[{value:2,label:"流畅 320P"},{value:3,label:"标清 480P"},{value:4,label:"高清 720P"},{value:5,label:"全高清 1080P"},{value:10,label:"蓝光 4K"}],s=[{value:1,label:"转码已发起"},{value:2,label:"转码中"},{value:3,label:"转码完成"},{value:4,label:"转码失败",refill:!0},{value:11,label:"介质注入已发起"},{value:12,label:"介质注入中"},{value:13,label:"介质注入完成"},{value:14,label:"介质注入失败",refill:!0},{value:21,label:"信息注入已发起"},{value:22,label:"信息注入中"},{value:23,label:"信息注入完成"},{value:24,label:"信息注入失败",refill:!0}],c=[{value:"Provider",label:"卖方"},{value:"Customer",label:"买方"}],d=[{value:"Provider",label:"上游"},{value:"Customer",label:"下游"},{value:"Both",label:"上下游"}],b=[{value:1,label:"重要"},{value:3,label:"正常"},{value:4,label:"暂缓"}],v={only:[{label:"第几集",key:"start",prop:"start",value:""},{label:"总集数",key:"total",value:"1",hidden:!0}],double:[{label:"开始集数",key:"start",prop:"start",value:""},{label:"总集数",key:"total",prop:"total",value:""}],pattern:[{label:"多集创建",key:"double"},{label:"单集创建",key:"only"}]},f={only:[{label:"开始集数",key:"start",value:"1",disabled:!0},{label:"总集数",key:"total",value:"1",disabled:!0}],pattern:[{label:"单集创建",key:"only"}]},m={only:[{label:"第几期",key:"start",prop:"start",value:""},{label:"总期数",key:"total",value:"1",hidden:!0}],pattern:[{label:"单集创建",key:"only"}]},p={tvseries:v,animation:v,web_tv:v,movie:f,animation_movie:f,web_movie:f,variety:m,sport:v,travel:v,education:v,mother_baby:v,game:v,short_film:v,documentary:v,square_dance:v,SPECIAL_COLUMN:v,children:v},h=[{value:1,label:"是"},{value:0,label:"否"},{value:2,label:"未知"}]}}]);