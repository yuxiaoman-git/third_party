(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7eab357b"],{"0188":function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-autocomplete",{style:{width:e.width},attrs:{"fetch-suggestions":e.querySearchAsync,"trigger-on-focus":!1,"popper-class":"my-autocomplete",placeholder:"请输入内容",clearable:""},on:{select:e.handleSelect},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[r("span",[e._v(e._s(i))])]}}]),model:{value:e.state,callback:function(t){e.state=t},expression:"state"}})],1)},a=[],l=r("c7eb"),o=r("1da1"),n=(r("498a"),{name:"autocompleteSmart",model:{prop:"give",event:"returnBack"},props:{give:{type:String,default:function(){return""}},width:{type:String,default:function(){return"100%"}},syncDetails:{type:Boolean,default:function(){return!1}},onSuccess:{type:Function}},data:function(){return{state:""}},watch:{state:{handler:function(e){this.$emit("returnBack",e)}},give:{handler:function(e){this.state=e}}},methods:{querySearchAsync:function(e,t){var r=this;return Object(o["a"])(Object(l["a"])().mark((function i(){var a;return Object(l["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.trim()){i.next=3;break}return t([]),i.abrupt("return");case 3:return i.next=5,r.$store.dispatch("media/imdbSearchNameList",{wd:e});case 5:a=i.sent,a&&0===a.code&&t(a.data&&a.data||[]);case 7:case"end":return i.stop()}}),i)})))()},handleSelect:function(e){var t=this;return Object(o["a"])(Object(l["a"])().mark((function r(){return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.state=e;case 1:case"end":return r.stop()}}),r)})))()}}}),s=n,u=(r("7a4a"),r("28b3"),r("2877")),c=Object(u["a"])(s,i,a,!1,null,"a2b465e4",null);t["a"]=c.exports},"07a7":function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,width:e.width,top:e.top,fullscreen:e.fullscreen,"append-to-body":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("div",{ref:"header",attrs:{slot:"title"},slot:"title"},[r("div",[r("span",[e._v(e._s(e.title))]),r("el-link",{staticClass:"full-screen-box",attrs:{underline:!1},on:{click:function(t){e.fullscreen=!e.fullscreen}}},[r("svg-icon",{directives:[{name:"show",rawName:"v-show",value:!e.fullscreen,expression:"!fullscreen"}],attrs:{"icon-class":"fullscreen"}}),r("svg-icon",{directives:[{name:"show",rawName:"v-show",value:e.fullscreen,expression:"fullscreen"}],attrs:{"icon-class":"exit-fullscreen"}})],1)],1)]),r("el-scrollbar",[r("div",{style:e.styleObj},[e._t("default")],2)]),r("span",{ref:"footer",staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e.isShowSaveBtn?r("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:e.handelSave}},[e._v("确 定")]):e._e()],1)],1)},a=[],l=r("ade3"),o=(r("99af"),{props:{title:{type:String,default:function(){return"提示"}},width:{type:String,default:function(){return"500px"}},top:{type:String,default:function(){return"10px"}},show:{type:Boolean,default:function(){return!1}},loading:{type:Boolean,default:function(){return!1}},isShowSaveBtn:{type:Boolean,default:function(){return!0}}},computed:{dialogVisible:{get:function(){return this.fullscreen=!1,this.show},set:function(e){this.$emit("update:show",e)}}},data:function(){return{fullscreen:!1,styleObj:{}}},watch:{fullscreen:{handler:function(e){var t=this;this.$nextTick((function(){var r=t.getOffsetHeight("header"),i=t.getOffsetHeight("footer");r&&i&&t.$set(t,"styleObj",Object(l["a"])({minHeight:"100px"},e?"height":"maxHeight",e?"calc(100vh - ".concat(r,"px - ").concat(i,"px)"):"calc(100vh - ".concat(r,"px - ").concat(i,"px - ").concat(t.top," - 10px)")))}))},immediate:!0}},methods:{handelSave:function(){this.$emit("save")},getOffsetHeight:function(e){var t=this.$refs[e],r=t&&t.parentNode;if(r)return r.offsetHeight}}}),n=o,s=(r("b4a8"),r("2877")),u=Object(s["a"])(n,i,a,!1,null,"5d7a589d",null);t["a"]=u.exports},"09f4":function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),Math.easeInOutQuad=function(e,t,r,i){return e/=i/2,e<1?r/2*e*e+t:(e--,-r/2*(e*(e-2)-1)+t)};var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function a(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function o(e,t,r){var o=l(),n=e-o,s=20,u=0;t="undefined"===typeof t?500:t;var c=function e(){u+=s;var l=Math.easeInOutQuad(u,o,n,t);a(l),u<t?i(e):r&&"function"===typeof r&&r()};c()}},"156c":function(e,t,r){},1646:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-popover",{attrs:{placement:e.placement,trigger:"hover","open-delay":200}},[r("el-image",{staticStyle:{"max-width":"400px"},attrs:{src:e.src}}),r("el-image",{style:{width:e.width,height:e.height,verticalAlign:"middle"},attrs:{slot:"reference",src:e.src+"?x-oss-process=image/resize,m_lfit,w_"+parseInt(e.width),fit:e.fit},slot:"reference"},[r("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[r("i",{staticClass:"el-icon-picture-outline"})])])],1)],1)},a=[],l={name:"ImgPreview",props:{src:{type:String,default:function(){return""}},width:{type:String,default:function(){return"30px"}},height:{type:String},placement:{type:String,default:function(){return"right"}},fit:{type:String,default:function(){return"fit"}}},mounted:function(){}},o=l,n=r("2877"),s=Object(n["a"])(o,i,a,!1,null,null,null);t["a"]=s.exports},2305:function(e,t,r){},"28b3":function(e,t,r){"use strict";r("156c")},"2ee2":function(e,t,r){"use strict";r("48ed")},"33b6":function(e,t,r){},"40b3":function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("mRComponent")],1)},a=[],l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",size:"small"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-row",[r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"名称"}},[r("autocompleteSmart",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"年代"}},[r("SelectItme",{attrs:{type:"years",width:"100%"},model:{value:e.form.years,callback:function(t){e.$set(e.form,"years",t)},expression:"form.years"}})],1)],1),r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"国家"}},[r("SelectItme",{attrs:{type:"region",width:"100%"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}})],1)],1),r("el-col",{attrs:{span:5}},[r("el-form-item",{attrs:{label:"类型"}},[r("SelectItme",{attrs:{type:"classify",width:"100%"},model:{value:e.form.classify,callback:function(t){e.$set(e.form,"classify",t)},expression:"form.classify"}})],1)],1),r("el-col",{attrs:{span:4}},[r("el-form-item",{attrs:{label:"","label-width":"10px"}},[r("div",{staticClass:"space-between"},[r("el-button",{attrs:{type:"primary","native-type":"submit"},nativeOn:{click:function(t){return t.preventDefault(),e.handelSearch(t)}}},[e._v("查询")]),e.$checkPermission(["add"])?r("el-button",{staticClass:"fr3",attrs:{type:"success"},on:{click:e.handelAdd}},[e._v("新增")]):e._e()],1)])],1)],1)],1),r("el-table",{ref:"tableData",staticClass:"table-data",staticStyle:{width:"max-content"},attrs:{data:e.tableData,border:"",size:"mini"},on:{"row-click":e.rowClick}},[r("el-table-column",{attrs:{prop:"id",label:"ID",width:"70",fixed:""}}),r("el-table-column",{attrs:{label:"图片",width:"50",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[i.img?r("ImgPreview",{attrs:{src:i&&i.img,fit:"scale-down",width:"18px"}}):e._e()]}}])}),r("el-table-column",{attrs:{prop:"name",label:"名称",width:"180",fixed:"","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"media_ext.format",label:"介质编码",width:"130",fixed:""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(e.filterFormat(r.media_ext.format).label||"")+" ")]}}])}),r("el-table-column",{attrs:{prop:"category",label:"类型",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(e.filterItems(r.category).label||"")+" ")]}}])}),r("el-table-column",{attrs:{prop:"douban_score",label:"评分",width:"50"}}),r("el-table-column",{attrs:{label:"题材",width:"120","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(e.getTitle(r.genre_list))+" ")]}}])}),r("el-table-column",{attrs:{label:"国家",width:"120","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(e.getTitle(r.region_list))+" ")]}}])}),r("el-table-column",{attrs:{prop:"languages",label:"语言",width:"100","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{label:"年份",prop:"year",width:"60"}}),r("el-table-column",{attrs:{label:"上映时间",prop:"date_published",width:"120","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"episodes",label:"集数",width:"50","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"minutes",label:"时长",width:"50","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"total_minutes",label:"总时长",width:"60","show-overflow-tooltip":""}}),r("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"140","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[r("span",[e._v(e._s(e._f("formatDate")(i.create_time,"all")))])]}}])}),r("el-table-column",{attrs:{label:"媒体横图",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[i.media_ext.media_horpic?r("ImgPreview",{attrs:{src:i.media_ext&&i.media_ext.media_horpic,fit:"scale-down",width:"30px"}}):e._e()]}}])}),r("el-table-column",{attrs:{label:"媒体竖图",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[i.media_ext.media_verpic?r("ImgPreview",{attrs:{src:i.media_ext&&i.media_ext.media_verpic,fit:"scale-down",width:"18px"}}):e._e()]}}])}),r("el-table-column",{attrs:{label:"操作",width:"200",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[r("div",{staticClass:"operate-btn"},[e.$checkPermission(["edit"])?r("span",{on:{click:function(t){return t.stopPropagation(),e.handelEdit(i)}}},[e._v("修改")]):e._e(),e.$checkPermission(["edit"])?r("span",{on:{click:function(t){return t.stopPropagation(),e.handelAddDiversity(i)}}},[e._v("新增分集")]):e._e(),e.$checkPermission(["edit"])?r("span",{on:{click:function(t){return t.stopPropagation(),e.handelInfoExtend(i)}}},[e._v("扩展信息")]):e._e()])]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],style:{marginBottom:e.marginBottom+"px"},attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}}),r("el-card",{directives:[{name:"show",rawName:"v-show",value:e.isShowDetailsInfo,expression:"isShowDetailsInfo"},{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"detailsInfo",staticClass:"details-info",style:{left:e.getSidebar()},attrs:{shadow:"never"}},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",{staticStyle:{"font-size":"14px"}},[e._v("更多信息")]),r("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){e.isShowDetailsInfo=!1}}},[e._v("关闭")])],1),r("div",{staticClass:"content-box"},[r("div",{staticStyle:{"min-width":"137px"}},[e.rowData&&e.rowData.img?r("el-image",{staticStyle:{width:"137px"},attrs:{src:e.rowData&&e.rowData.img}}):e._e()],1),r("ul",[r("li",[r("span",{staticClass:"label"},[e._v("又名:")]),r("span",{staticClass:"line-height-num"},[e._v(e._s(e.rowData&&e.rowData.alias))])]),r("li",[r("span",{staticClass:"label"},[e._v("导演:")]),r("span",{staticClass:"line-height-num"},[e._v(e._s(e.getTitle(e.rowData&&e.rowData.director_list)))])]),r("li",[r("span",{staticClass:"label"},[e._v("编剧:")]),r("span",{staticClass:"line-height-num"},[e._v(e._s(e.getTitle(e.rowData&&e.rowData.author_list)))])]),r("li",[r("span",{staticClass:"label"},[e._v("主演:")]),r("span",{staticClass:"line-height-num"},[e._v(e._s(e.getTitle(e.rowData&&e.rowData.actor_list)))])]),r("li",[r("span",{staticClass:"label"},[e._v("简介:")]),r("span",{staticClass:"line-height-num"},[e._v(e._s(e.rowData&&e.rowData.storyline))])])])])]),e.dialogVisible?r("el-dialog",{attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,top:"20px",width:"800px",title:"new"===e.dialogType?"新增媒资":"edit"===e.dialogType?"修改媒资":""},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.ruleFormLoading,expression:"ruleFormLoading"}],ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"140px",size:"small"}},[r("el-form-item",{staticStyle:{"margin-left":"-70px"},attrs:{prop:"is_divided"}},[r("el-checkbox",{staticClass:"spliter",attrs:{disabled:""},model:{value:e.ruleForm.is_divided,callback:function(t){e.$set(e.ruleForm,"is_divided",t)},expression:"ruleForm.is_divided"}},[e._v("拆条节目")])],1),r("el-form-item",{attrs:{label:"媒资名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"媒资名称"},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"关联节目",prop:"program"}},[r("SelectItmeRemote",{attrs:{width:"100%",type:"searchMedia",remote:"",multiple:""},model:{value:e.ruleForm.program,callback:function(t){e.$set(e.ruleForm,"program",t)},expression:"ruleForm.program"}})],1),r("el-form-item",{attrs:{label:"导演",prop:"director_list"}},[r("div",{attrs:{slot:"label"},slot:"label"},[r("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(t){e.figuredialog=!0}}}),r("span",[e._v("导演")])]),r("SelectItmeRemote",{attrs:{type:"longhair",width:"100%",remote:"",multiple:""},model:{value:e.ruleForm.director_list,callback:function(t){e.$set(e.ruleForm,"director_list",t)},expression:"ruleForm.director_list"}})],1),r("el-form-item",{attrs:{label:"编剧",prop:"author_list"}},[r("div",{attrs:{slot:"label"},slot:"label"},[r("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(t){e.figuredialog=!0}}}),r("span",[e._v("编剧")])]),r("SelectItmeRemote",{attrs:{type:"longhair",width:"100%",remote:"",multiple:""},model:{value:e.ruleForm.author_list,callback:function(t){e.$set(e.ruleForm,"author_list",t)},expression:"ruleForm.author_list"}})],1),r("el-form-item",{attrs:{label:"主演",prop:"actor_list"}},[r("div",{attrs:{slot:"label"},slot:"label"},[r("i",{staticClass:"el-icon-circle-plus-outline icon",on:{click:function(t){e.figuredialog=!0}}}),r("span",[e._v("主演")])]),r("SelectItmeRemote",{attrs:{type:"longhair",width:"100%",remote:"",multiple:""},model:{value:e.ruleForm.actor_list,callback:function(t){e.$set(e.ruleForm,"actor_list",t)},expression:"ruleForm.actor_list"}})],1),r("el-form-item",{attrs:{label:"又名"}},[r("el-input",{attrs:{maxlength:200,"show-word-limit":"",placeholder:"又名"},model:{value:e.ruleForm.alias,callback:function(t){e.$set(e.ruleForm,"alias","string"===typeof t?t.trim():t)},expression:"ruleForm.alias"}})],1),r("el-form-item",{attrs:{label:"年份",prop:"year"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"year",placeholder:"选择年","value-format":"yyyy"},model:{value:e.ruleForm.year,callback:function(t){e.$set(e.ruleForm,"year",t)},expression:"ruleForm.year"}})],1),r("el-form-item",{attrs:{label:"制片国家/地区",prop:"regions"}},[r("SelectItme",{ref:"region",attrs:{type:"region",multiple:"",width:"100%"},model:{value:e.ruleForm.regions,callback:function(t){e.$set(e.ruleForm,"regions",t)},expression:"ruleForm.regions"}})],1),r("el-form-item",{attrs:{label:"语言",prop:"languages"}},[r("el-input",{attrs:{placeholder:"语言"},model:{value:e.ruleForm.languages,callback:function(t){e.$set(e.ruleForm,"languages",t)},expression:"ruleForm.languages"}})],1),r("el-form-item",{attrs:{label:"评分",prop:"douban_score"}},[r("el-input",{directives:[{name:"enter-number",rawName:"v-enter-number",value:1,expression:"1"}],attrs:{placeholder:"评分"},model:{value:e.ruleForm.douban_score,callback:function(t){e.$set(e.ruleForm,"douban_score",t)},expression:"ruleForm.douban_score"}})],1),r("el-form-item",{attrs:{label:"集数",prop:"episodes"}},[r("el-input",{directives:[{name:"enter-number",rawName:"v-enter-number",value:0,expression:"0"}],attrs:{type:"text",placeholder:"集数"},model:{value:e.ruleForm.episodes,callback:function(t){e.$set(e.ruleForm,"episodes",t)},expression:"ruleForm.episodes"}})],1),r("el-form-item",{attrs:{label:"时长",prop:"minutes"}},[r("el-input",{directives:[{name:"enter-number",rawName:"v-enter-number",value:2,expression:"2"}],attrs:{placeholder:"时长"},model:{value:e.ruleForm.minutes,callback:function(t){e.$set(e.ruleForm,"minutes",t)},expression:"ruleForm.minutes"}},[r("template",{slot:"suffix"},[e._v("分钟")])],2)],1),r("el-form-item",{attrs:{label:"总时长",prop:"total_minutes"}},[r("el-input",{directives:[{name:"enter-number",rawName:"v-enter-number",value:2,expression:"2"}],attrs:{placeholder:"总时长"},model:{value:e.ruleForm.total_minutes,callback:function(t){e.$set(e.ruleForm,"total_minutes",t)},expression:"ruleForm.total_minutes"}},[r("template",{slot:"suffix"},[e._v("分钟")])],2)],1),r("el-form-item",{attrs:{label:"上映日期",prop:"date_published"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"上映日期"},model:{value:e.ruleForm.date_published,callback:function(t){e.$set(e.ruleForm,"date_published",t)},expression:"ruleForm.date_published"}})],1),r("el-form-item",{attrs:{label:"类型",prop:"classify"}},[r("SelectItme",{attrs:{type:"classify",width:"100%"},model:{value:e.ruleForm.classify,callback:function(t){e.$set(e.ruleForm,"classify",t)},expression:"ruleForm.classify"}})],1),r("el-form-item",{attrs:{label:"题材",prop:"genre_list"}},[r("alphabetSelect",{ref:"genre",attrs:{type:"genre",multiple:"",width:"100%"},model:{value:e.ruleForm.genre_list,callback:function(t){e.$set(e.ruleForm,"genre_list",t)},expression:"ruleForm.genre_list"}})],1),r("el-form-item",{attrs:{label:"简介"}},[r("el-input",{attrs:{type:"textarea",rows:3,placeholder:"简介",maxlength:"500","show-word-limit":""},model:{value:e.ruleForm.storyline,callback:function(t){e.$set(e.ruleForm,"storyline",t)},expression:"ruleForm.storyline"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1):e._e(),e.dialogVisibleDiv?r("el-dialog",{attrs:{title:"新增",visible:e.dialogVisibleDiv,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.dialogVisibleDiv=t}}},[r("el-form",{ref:"ruleFormDiv",attrs:{model:e.ruleFormDiv,rules:e.rulesDiv,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"创建模式",prop:"pattern"}},[r("el-radio-group",{model:{value:e.ruleFormDiv.pattern,callback:function(t){e.$set(e.ruleFormDiv,"pattern",t)},expression:"ruleFormDiv.pattern"}},e._l(e.patternList,(function(t,i){return r("el-radio",{key:i,attrs:{label:t.key}},[e._v(e._s(t.label))])})),1)],1),e._l(e.list,(function(t,i){return r("div",{key:i},[t.hidden?e._e():r("el-form-item",{attrs:{label:t.label,prop:t.prop}},[r("el-input",{directives:[{name:"enter-number",rawName:"v-enter-number",value:0,expression:"0"}],attrs:{placeholder:t.label,readonly:t.disabled},on:{blur:e.handelBlur},model:{value:t.value,callback:function(r){e.$set(t,"value",r)},expression:"item.value"}})],1)],1)})),r("el-form-item",{attrs:{label:"简介"}},[r("el-input",{attrs:{type:"textarea",rows:4,maxlength:"128","show-word-limit":"",placeholder:"请输入"},model:{value:e.ruleFormDiv.storyline,callback:function(t){e.$set(e.ruleFormDiv,"storyline",t)},expression:"ruleFormDiv.storyline"}})],1),r("el-form-item",{attrs:{label:"海报",prop:"episode_horpic"}},[r("span",{attrs:{slot:"label"},slot:"label"},[r("span",[e._v("海报")]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.ver_size&&e.ruleFormDiv.episode_horpic,expression:"ver_size && ruleFormDiv.episode_horpic"}],staticStyle:{"line-height":"1"}},[e._v(" "+e._s(e.ver_size)+" ")])]),r("uploadImage",{attrs:{"img-type":"horizontal"},on:{getSize:e.getSize},model:{value:e.ruleFormDiv.episode_horpic,callback:function(t){e.$set(e.ruleFormDiv,"episode_horpic",t)},expression:"ruleFormDiv.episode_horpic"}})],1)],2),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogVisibleDiv=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitDiv("ruleFormDiv")}}},[e._v("确 定")])],1)],1):e._e(),e.figuredialog?r("figure-dialog",{attrs:{"dialog-type":"add",visible:e.figuredialog},on:{"update:visible":function(t){e.figuredialog=t}}}):e._e(),e.infoExtendObj.show?r("new-template-dialog",e._b({attrs:{title:"扩展信息",width:"700px"},on:{save:e.submitInfoExtend}},"new-template-dialog",e.infoExtendObj,!1,!0),[r("div",{staticClass:"app-container"},[r("fileInfoExtend",{ref:"fileInfoExtend",attrs:{"media-id":e.media_id,"on-success":e.onSuccess},on:{"on-loading":e.onLoading}})],1)]):e._e()],1)},o=[],n=r("3835"),s=r("c7eb"),u=r("1da1"),c=r("b85c"),d=(r("e9c4"),r("4de4"),r("d3b7"),r("b0c0"),r("d81d"),r("99af"),r("159b"),r("07a7")),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"120px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"名称",prop:"name"}},[r("SelectItmeRemote",{attrs:{width:"60%",type:"checkMovie",remote:""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"媒体编码格式",prop:"format"}},[r("SelectItme",{attrs:{type:"MediaCodingFormat",width:"60%"},model:{value:e.ruleForm.format,callback:function(t){e.$set(e.ruleForm,"format",t)},expression:"ruleForm.format"}})],1),r("el-form-item",{attrs:{label:"尺寸限制",prop:"is_charge"}},[r("el-radio-group",{on:{change:function(t){return e.sizeLimitChange()}},model:{value:e.sizeLimit,callback:function(t){e.sizeLimit=t},expression:"sizeLimit"}},[r("el-radio",{attrs:{label:1}},[e._v("限制尺寸")]),r("el-radio",{attrs:{label:2}},[e._v("原图")])],1)],1),r("el-form-item",{attrs:{label:"媒体竖图",prop:"media_verpic"}},[r("span",{attrs:{slot:"label"},slot:"label"},[r("span",[e._v("媒体竖图")]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.ver_size,expression:"ver_size"}],staticStyle:{"line-height":"1"}},[e._v(e._s(e.ver_size))])]),r("uploadImage",{attrs:{"img-type":e.vertical_,maxSize:10},on:{getSize:function(t){return e.getSize("ver_size",t)},getFileSize:function(t){return e.getFileSize("len1",t)}},model:{value:e.ruleForm.media_verpic,callback:function(t){e.$set(e.ruleForm,"media_verpic",t)},expression:"ruleForm.media_verpic"}})],1),r("el-form-item",{attrs:{label:"媒体横图",prop:"media_horpic"}},[r("span",{attrs:{slot:"label"},slot:"label"},[r("span",[e._v("媒体横图")]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.hor_size,expression:"hor_size"}],staticStyle:{"line-height":"1"}},[e._v(e._s(e.hor_size))])]),r("uploadImage",{attrs:{"img-type":e.horizontal_,maxSize:10},on:{getSize:function(t){return e.getSize("hor_size",t)},getFileSize:function(t){return e.getFileSize("len2",t)}},model:{value:e.ruleForm.media_horpic,callback:function(t){e.$set(e.ruleForm,"media_horpic",t)},expression:"ruleForm.media_horpic"}})],1),r("el-form-item",{attrs:{label:"影片等级",prop:"MediaRating"}},[r("SelectItme",{attrs:{type:"MediaRating",width:"60%"},model:{value:e.ruleForm.MediaRating,callback:function(t){e.$set(e.ruleForm,"MediaRating",t)},expression:"ruleForm.MediaRating"}})],1),r("el-form-item",{attrs:{label:"看点",prop:"focus"}},[r("el-input",{staticStyle:{width:"60%"},attrs:{type:"textarea",placeholder:"看点",maxlength:"85","show-word-limit":""},model:{value:e.ruleForm.focus,callback:function(t){e.$set(e.ruleForm,"focus","string"===typeof t?t.trim():t)},expression:"ruleForm.focus"}})],1),r("el-form-item",{attrs:{label:"审批号",prop:"approval_num"}},[r("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"审批号"},model:{value:e.ruleForm.approval_num,callback:function(t){e.$set(e.ruleForm,"approval_num","string"===typeof t?t.trim():t)},expression:"ruleForm.approval_num"}})],1),r("el-form-item",{attrs:{label:"更新频率",prop:"update_frequency"}},[r("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"更新频率",maxlength:"50","show-word-limit":""},model:{value:e.ruleForm.update_frequency,callback:function(t){e.$set(e.ruleForm,"update_frequency","string"===typeof t?t.trim():t)},expression:"ruleForm.update_frequency"}})],1),r("el-form-item",{attrs:{label:"报备id",prop:"report_id"}},[r("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"报备id",maxlength:"50","show-word-limit":""},model:{value:e.ruleForm.report_id,callback:function(t){e.$set(e.ruleForm,"report_id","string"===typeof t?t.trim():t)},expression:"ruleForm.report_id"}})],1),r("el-form-item",{attrs:{label:"抢注工单id",prop:"prior_cdn_id"}},[r("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"抢注工单id",maxlength:"50","show-word-limit":""},model:{value:e.ruleForm.prior_cdn_id,callback:function(t){e.$set(e.ruleForm,"prior_cdn_id","string"===typeof t?t.trim():t)},expression:"ruleForm.prior_cdn_id"}})],1)],1)],1)},p=[],f=(r("a9e3"),r("4ed3")),h=r("73e5"),b=r("7e5d"),v={id:"",name:null,media_verpic:"",media_horpic:"",pro_type:null,MediaRating:"",format:1,focus:"",approval_num:"",update_frequency:"",report_id:"",prior_cdn_id:""},g={name:"fileInfoExtend",components:{SelectItmeRemote:f["a"],SelectItme:h["a"],uploadImage:b["a"]},props:{onSuccess:{type:Function},mediaId:{type:Number}},data:function(){return{ruleForm:Object.assign({},v),loading:!1,rules:{name:[{required:!0,message:"请选择名称",trigger:"blur"}],media_verpic:[{required:!0,message:"请选择图片",trigger:"change"}],media_horpic:[{required:!0,message:"请选择图片",trigger:"change"}],pro_type:[{required:!0,message:"请选择版本",trigger:"change"}],MediaRating:[{required:!0,message:"请选择影片等级",trigger:"change"}],format:[{required:!0,message:"请选择媒体编码格式",trigger:"change"}],focus:[{required:!0,message:"请输入看点",trigger:"blur"}]},initBody:null,ver_size:"",hor_size:"",ver_fileSize:"",hor_fileSize:"",sizeLimit:null,vertical_:"vertical",horizontal_:"horizontal",imgObj:{}}},watch:{sizeLimit:function(e){1==e?(this.ruleForm.media_verpic=this.imgObj.media_verpic,this.ruleForm.media_horpic=this.imgObj.media_horpic):(this.ruleForm.media_verpic=this.imgObj.media_verpic1,this.ruleForm.media_horpic=this.imgObj.media_horpic1)}},mounted:function(){this.injectorMediaExtDetail()},methods:{getSize:function(e,t){this[e]=t},getFileSize:function(e,t){this[e]=t},injectorMediaExtDetail:function(){var e=this;return Object(u["a"])(Object(s["a"])().mark((function t(){var r,i,a;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.$refs.ruleForm&&e.$refs.ruleForm.clearValidate(),r={media_id:e.mediaId},e.loading=!0,t.next=5,e.$store.dispatch("injector/injectorMediaExtDetail",r);case 5:i=t.sent,e.loading=!1,e.ruleForm=Object.assign({},v),i&&0===i.code&&(a=i.data||{},e.ruleForm.id=a.id,a.media&&(e.ruleForm.name=Object.assign({value:a.media.id,label:a.media.name},a.media)),e.imgObj=a,e.ruleForm.MediaRating=a.rating||"",e.ruleForm.focus=a.focus,e.ruleForm.approval_num=a.approval_num||"",e.ruleForm.format=a.format||1,e.ruleForm.update_frequency=a.update_frequency||"",e.ruleForm.report_id=a.report_id||"",e.ruleForm.prior_cdn_id=a.prior_cdn_id||"",e.initBody=e.getBody(),e.initBody.verpic_size=a.verpic_size,e.initBody.horpic_size=a.horpic_size,e.initBody.type=a.type?a.type:1,e.sizeLimit=a.type?a.type:1,e.len1=a.len1||0,e.len2=a.len2||0,e.sizeLimitChange());case 9:case"end":return t.stop()}}),t)})))()},getBody:function(){return{media_id:this.ruleForm.name&&this.ruleForm.name.value,media_verpic:this.ruleForm.media_verpic,media_horpic:this.ruleForm.media_horpic,rating:this.ruleForm.MediaRating||void 0,focus:this.ruleForm.focus,approval_num:this.ruleForm.approval_num,format:this.ruleForm.format,verpic_size:this.ver_size,horpic_size:this.hor_size,len1:this.len1,len2:this.len2,type:this.sizeLimit,update_frequency:this.ruleForm.update_frequency,report_id:this.ruleForm.report_id,prior_cdn_id:this.ruleForm.prior_cdn_id}},isEqually:function(e,t){for(var r in e)if(e[r]!==t[r])return!1;return!0},submitEdit:function(){var e=this;this.$refs["ruleForm"].validate(function(){var t=Object(u["a"])(Object(s["a"])().mark((function t(r){var i;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:r&&(i=e.getBody(),console.log(i),e.isEqually(e.initBody,i)?e.onSuccess&&e.onSuccess(!0):e.injectorMediaEditMediaExtField(i));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},injectorMediaEditMediaExtField:function(e){var t=this;return Object(u["a"])(Object(s["a"])().mark((function r(){var i;return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.$emit("on-loading",!0),r.next=3,t.$store.dispatch("injector/injectorMediaEditMediaExtField",e);case 3:i=r.sent,t.$emit("on-loading",!1),i&&0===i.code&&(t.$message.success("修改成功"),t.onSuccess&&t.onSuccess(!0));case 6:case"end":return r.stop()}}),r)})))()},sizeLimitChange:function(){1==this.sizeLimit?(this.vertical_="vertical",this.horizontal_="horizontal"):(this.vertical_="",this.horizontal_="")}}},_=g,y=r("2877"),w=Object(y["a"])(_,m,p,!1,null,null,null),F=w.exports,x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.dialogVisible?r("el-dialog",{attrs:{visible:e.dialogVisible,"close-on-click-modal":!1,title:"edit"===e.dialogType?"修改艺术家":"新增艺术家"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px",size:"small"}},[r("el-form-item",{attrs:{label:"名字",prop:"name"}},[r("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"名字",maxlength:"30","show-word-limit":""},model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name","string"===typeof t?t.trim():t)},expression:"ruleForm.name"}})],1),r("el-form-item",{attrs:{label:"生日",prop:"birthday"}},[r("el-date-picker",{staticStyle:{width:"60%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.birthday,callback:function(t){e.$set(e.ruleForm,"birthday",t)},expression:"ruleForm.birthday"}})],1),r("el-form-item",{attrs:{label:"职业"}},[r("SelectItme",{attrs:{type:"job",multiple:"",width:"60%"},model:{value:e.ruleForm.profession,callback:function(t){e.$set(e.ruleForm,"profession",t)},expression:"ruleForm.profession"}})],1),r("el-form-item",{attrs:{label:"性别"}},[r("SelectItme",{attrs:{type:"gender",width:"60%"},model:{value:e.ruleForm.gender,callback:function(t){e.$set(e.ruleForm,"gender",t)},expression:"ruleForm.gender"}})],1),r("div",{staticStyle:{"text-align":"right"}},[r("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirm("ruleForm")}}},[e._v("确 定")])],1)],1)],1):e._e()},k=[],S=(r("a15b"),{name:"",birthday:"",birthplace:"",profession:[],gender:null}),O={props:{visible:{type:Boolean,default:function(){return!1}},dialogType:{type:String,default:function(){return""}},rowId:{type:[String,Number],default:function(){return""}}},components:{SelectItme:h["a"]},computed:{dialogVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}}},data:function(){return{ruleForm:Object.assign({},S),loading:!1,rules:{name:[{required:!0,message:"请输入名字",trigger:"blur"}]}}},mounted:function(){"edit"===this.dialogType&&this.imdbCelebrityDetail()},methods:{confirm:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(u["a"])(Object(s["a"])().mark((function e(r){var i,a,l,o,n;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}i=t.ruleForm,a=i.name,l=i.birthday,o=i.gender,n={name:a,birthday:l,profession:t.ruleForm.profession.join("/"),gender:"man"==o?"男":"woman"==o?"女":void 0},"edit"===t.dialogType?(n.celebrity_id=t.ruleForm.id,t.imdbEditCelebrity(n)):t.imdbAddCelebrity(n),e.next=7;break;case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},imdbEditCelebrity:function(e){var t=this;return Object(u["a"])(Object(s["a"])().mark((function r(){var i;return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch("media/imdbEditCelebrity",e);case 2:i=r.sent,0===i.code&&(t.$message.success("修改成功"),t.dialogVisible=!1,t.$emit("getData",!0));case 4:case"end":return r.stop()}}),r)})))()},imdbAddCelebrity:function(e){var t=this;return Object(u["a"])(Object(s["a"])().mark((function r(){var i;return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch("media/imdbAddCelebrity",e);case 2:i=r.sent,0===i.code&&(t.$message.success("新增成功"),t.dialogVisible=!1,t.$emit("getData",!0));case 4:case"end":return r.stop()}}),r)})))()},imdbCelebrityDetail:function(){var e=this;return Object(u["a"])(Object(s["a"])().mark((function t(){var r,i;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,e.$store.dispatch("media/imdbCelebrityDetail",{celebrity_id:e.rowId});case 3:r=t.sent,e.loading=!1,e.loading=!1,0===r.code&&(i=r.data||{},e.ruleForm.id=i.id,e.ruleForm.name=i.name,e.ruleForm.birthday=i.birthday,e.ruleForm.gender="男"===i.gender?"man":"女"===i.gender?"woman":null,i.profession?e.ruleForm.profession=i.profession.split("/"):e.ruleForm.profession=[]);case 7:case"end":return t.stop()}}),t)})))()}}},j=O,D=Object(y["a"])(j,x,k,!1,null,null,null),$=D.exports,I=r("1646"),z=r("333d"),C=r("bafd"),E=r("0188"),q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",["select"===e.el?r("el-select",{style:{width:e.width},attrs:{filterable:"",clearable:e.clearable,disabled:e.disabled,placeholder:"请选择",loading:e.loading,multiple:e.multiple,"collapse-tags":e.multiple&&e.value&&e.value.length>3},on:{change:e.handleChange},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[r("div",{staticClass:"alpIndex"},[r("div",{staticClass:"alpWrap"},e._l(e.alphabet,(function(t,i){return r("span",{key:i,attrs:{href:"#"+t},on:{click:function(r){return e.jumpTo(t)}}},[e._v(e._s(t))])})),0)]),e._l(e.options,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value,disabled:t.disabled}},[r("a",{attrs:{id:t.letter,name:t.letter}},[e._v(e._s(t.label))]),t.hint?r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.hint,placement:"right"}},[r("div",[e._v(e._s(t.label))])]):e._e()],1)}))],2):e._e()],1)},T=[],M=r("2909"),L=(r("4e82"),r("caad"),r("2532"),r("795d")),V={name:"alphabetSelect",model:{prop:"give",event:"returnBack"},props:{give:{type:[String,Array,Boolean,Number],default:function(){return null}},width:{type:String,default:function(){return"60%"}},type:{type:String,default:function(){return""}},multiple:{type:Boolean,default:function(){return!1}},disabled:{type:Boolean,default:function(){return!1}},clearable:{type:Boolean,default:function(){return!0}},platform:{type:Boolean,default:function(){return!1}},el:{type:String,default:function(){return"select"}},optionsList:{type:Array}},data:function(){return{options:[{value:!0,label:"是"},{value:!1,label:"否"}],loading:!1,alphabet:[]}},watch:{optionsList:{handler:function(){this.options=this.optionsList||[]},deep:!0}},computed:{value:{get:function(){return this.give},set:function(e){this.$emit("returnBack",e)}}},mounted:function(){this.getOptions()},methods:{getOptions:function(){var e=this;return Object(u["a"])(Object(s["a"])().mark((function t(){var r,i,a,l,o;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.options=[],!e.optionsList){t.next=3;break}return t.abrupt("return");case 3:return r=e.type,i=e.platform,a=L["a"][r]||L["a"]["default"],e.loading=!0,l=[],t.next=9,a({type:r,platform:i});case 9:if(t.t0=t.sent,t.t0){t.next=12;break}t.t0=[];case 12:l=t.t0,e.options=l.sort((function(e,t){return e.letter.charCodeAt(0)-t.letter.charCodeAt(0)})),o=[],e.options.forEach((function(e){o.push(e.letter)})),e.alphabet=e.unique(o),e.loading=!1;case 18:case"end":return t.stop()}}),t)})))()},unique:function(e){if(Array.isArray(e)){e=e.sort();for(var t=[e[0]],r=1;r<e.length;r++)e[r]!==e[r-1]&&t.push(e[r]);return t}console.log("type error!")},handleChange:function(e){var t=this.options.filter((function(t){return Array.isArray(e)?e.includes(t.value):t.value==e}));this.multiple?this.$emit("change",t):this.$emit.apply(this,["change"].concat(Object(M["a"])(t)))},jumpTo:function(e){document.querySelector("#"+e).scrollIntoView(!0)}}},B=V,A=(r("7592"),Object(y["a"])(B,q,T,!1,null,"1593e717",null)),N=A.exports,R=r("efeca"),P=r("ed08"),H=r("bec9"),Q=r("8975"),J=r("5f87"),U={classify:null,program:[],author_list:[],actor_list:[],director_list:[],genre_list:[],regions:[],languages:"",alias:"",year:"",douban_score:"",episodes:"",minutes:"",total_minutes:"",date_published:"",imdb_id:"",storyline:"",name:"",is_divided:!0},G={pattern:"",media_id:"",start:"",total:"",series:"",interval_days:"",storyline:"",episode_horpic:""},W={name:"mRComponent",components:{SelectItme:h["a"],Pagination:z["a"],autocomplete:C["a"],autocompleteSmart:E["a"],ImgPreview:I["a"],SelectItmeRemote:f["a"],figureDialog:$,uploadImage:b["a"],NewTemplateDialog:d["a"],fileInfoExtend:F,alphabetSelect:N},data:function(){return{ver_size:"",figuredialog:!1,marginBottom:0,loading:!1,dialogVisibleDiv:!1,dialogType:"new",isShowDetailsInfo:!1,rowData:null,typeInfo:{},infoList:[],form:{name:"",region:null,years:null,classify:null},total:0,listQuery:{page:1,limit:20},dialogVisible:!1,ruleForm:Object.assign({},U),rules:{name:[{required:!0,message:"请输入媒资名称",trigger:"blur"}],program:[{required:!0,message:"请输入关联节目",trigger:"blur"}],genre_list:[{required:!0,message:"请选择题材",trigger:"change"}],year:[{required:!0,message:"请输入年份",trigger:"blur"}],regions:[{required:!0,message:"请选择制片国家/地区",trigger:"change"}],languages:[{required:!0,message:"请输入语言",trigger:"blur"}],episodes:[{required:!0,message:"请输入集数",trigger:"blur"}],minutes:[{required:!0,message:"请输入时长",trigger:"blur"}],total_minutes:[{required:!0,message:"请输入总时长",trigger:"blur"}],date_published:[{required:!0,message:"请输入上映日期",trigger:"blur"}],classify:[{required:!0,message:"请选择内容类型",trigger:"change"}]},ruleFormLoading:!1,tableData:[],ruleFormDiv:Object.assign({},G),rulesDiv:{start:[{required:!0,message:"请输入大于0的开始集数",trigger:"blur"},{validator:function(e,t,r){0===parseFloat(t)?r(new Error("请输入大于0的开始集数")):r()},trigger:"blur"}],total:[{required:!0,message:"请输入大于0的总集数",trigger:"blur"},{validator:function(e,t,r){0===parseFloat(t)?r(new Error("请输入大于0的总集数")):r()},trigger:"blur"}],interval_days:[{required:!0,message:"请输入大于0的间隔天数",trigger:"blur"},{validator:function(e,t,r){0===parseFloat(t)?r(new Error("请输入大于0的间隔天数")):r()},trigger:"blur"}]},type:"",list:[],patternList:[],episodes:0,infoExtendObj:{show:!1,loading:!1},media_id:0}},watch:{total_minutes:{handler:function(e){"new"===this.dialogType&&(this.ruleForm.total_minutes=e||"")}},"ruleFormDiv.pattern":{handler:function(e){if(this.getEpisodesList(),"double"===e){var t,r=Object(c["a"])(this.list);try{for(r.s();!(t=r.n()).done;){var i=t.value;"start"===i.prop&&(i.value=1),"total"===i.prop&&(i.value=this.episodes)}}catch(a){r.e(a)}finally{r.f()}}this.$refs.ruleFormDiv&&this.$refs.ruleFormDiv.clearValidate("start")}},dialogVisibleDiv:{handler:function(e){e||(this.ruleFormDiv=Object.assign({},G))}},isShowDetailsInfo:{handler:function(e){e||(this.marginBottom=0)}}},computed:{total_minutes:{get:function(){return Object(Q["accMul"])(this.ruleForm.episodes||0,this.ruleForm.minutes||0)}}},mounted:function(){this.imdbSearch()},deactivated:function(){this.isShowDetailsInfo=!1},methods:{getSidebar:H["e"],getSize:function(e){this.ver_size=e},handelInfoExtend:function(e){this.media_id=e.id,this.infoExtendObj.show=!0},submitInfoExtend:function(){this.$refs.fileInfoExtend.submitEdit()},onSuccess:function(){this.imdbSearch(),this.infoExtendObj.show=!1},onLoading:function(e){this.infoExtendObj.loading=e},getHeight:function(){var e=this;this.$nextTick((function(){var t=e.$refs.detailsInfo&&e.$refs.detailsInfo.$el.offsetHeight;e.marginBottom=t||0}))},getEpisodesList:function(){R["h"][this.type]&&R["h"][this.type][this.ruleFormDiv.pattern]&&(this.list=JSON.parse(JSON.stringify(R["h"][this.type][this.ruleFormDiv.pattern])))},handelAddDiversity:function(e){this.dialogVisibleDiv=!0,this.ruleFormDiv=Object.assign({},G),this.ruleFormDiv.media_id=e.id,this.type=e.category,this.getEpisodesList(),this.episodes=e.episodes,this.patternList=R["h"][this.type].pattern,this.ruleFormDiv.pattern=this.patternList[0].key},filterItems:function(e){var t=R["i"].filter((function(t){return t.value===e}));return t.length?t[0]:{}},filterFormat:function(e){var t=R["a"].filter((function(t){return t.value===e}));return t.length?t[0]:{}},rowClick:function(e){var t=this;return Object(u["a"])(Object(s["a"])().mark((function r(){return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.isShowDetailsInfo=!0,r.next=3,t.imdbDetail(e.id);case 3:t.getHeight();case 4:case"end":return r.stop()}}),r)})))()},getList:function(){this.imdbSearch()},handelAdd:function(){this.ruleForm=Object.assign({},U),this.dialogVisible=!0,this.dialogType="new"},handelEdit:function(e){this.ruleForm=Object.assign({},U),this.dialogVisible=!0,this.dialogType="edit",this.imdbDetail(e.id)},imdbDetail:function(e){var t=this;return Object(u["a"])(Object(s["a"])().mark((function r(){var i,a;return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.ruleFormLoading=!0,t.loading=!0,i={media_id:e},r.next=5,t.$store.dispatch("media/imdbDetail",i);case 5:a=r.sent,t.ruleFormLoading=!1,t.loading=!1,a&&0===a.code&&(t.getRuleForm(a.data||[]),t.rowData=a.data||[],t.ruleForm.id=a.data&&a.data.id);case 9:case"end":return r.stop()}}),r)})))()},handelSearch:function(){this.listQuery.page=1,this.imdbSearch(this.listQuery)},imdbSearch:function(){var e=this;return Object(u["a"])(Object(s["a"])().mark((function t(){var r,i,a,l,o,u,c,d,m,p,f,h;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.form.years&&e.form.years.split("-")||[],i=Object(n["a"])(r,2),a=i[0],l=i[1],o=e.form.name,u=e.listQuery,c=u.page,d=u.limit,m=e.form.region||void 0,p=e.form.classify||void 0,t.next=6,e.$store.dispatch("media/imdbSearch",{start_year:a,end_year:l,name:o,region_id:m,category:p,page:c,page_size:d});case 6:f=t.sent,0===f.code&&(h=f.data||{},e.tableData=h.media_list||[],e.total=h.total_page*d||0);case 8:case"end":return t.stop()}}),t)})))()},getRuleForm:function(e){this.ruleForm.img=e.img,this.ruleForm.name=e.name||"",this.ruleForm.program=e.related_medias&&e.related_medias.map((function(e){return Object.assign({value:e.id,label:"("+e.id+")"+e.name},e)})),this.ruleForm.director_list=e.director_list&&e.director_list.map((function(e){return Object.assign({value:e.id,label:e.name},e)})),this.ruleForm.author_list=e.author_list&&e.author_list.map((function(e){return Object.assign({value:e.id,label:e.name},e)})),this.ruleForm.actor_list=e.actor_list&&e.actor_list.map((function(e){return Object.assign({value:e.id,label:e.name},e)})),e.genre_list&&e.genre_list.length&&(this.ruleForm.genre_list=e.genre_list.map((function(e){return e.id}))),e.region_list&&e.region_list.length&&(this.ruleForm.regions=e.region_list.map((function(e){return e.id}))),this.ruleForm.languages=e.languages,this.ruleForm.alias=e.alias,this.ruleForm.year=e.year+"",this.ruleForm.douban_score=e.douban_score,this.ruleForm.episodes=e.episodes,this.ruleForm.minutes=e.minutes,this.ruleForm.total_minutes=e.total_minutes,this.ruleForm.date_published=this.formatDate(e.date_published),this.ruleForm.imdb_id=e.imdb_id,this.ruleForm.storyline=e.storyline,this.ruleForm.classify=e.category,this.ruleForm.is_divided=e.is_divided},formatDate:function(e){var t=new Date(e),r=t.getFullYear(),i=t.getMonth()+1,a=t.getDate();return r?"".concat(r,"-").concat(i>9?i:"0"+i,"-").concat(a>9?a:"0"+a):"2021-01-01"},getSucceed:function(e){this.getRuleForm(e),this.$refs.genre&&this.$refs.genre.getOptions(),this.$refs.region&&this.$refs.region.getOptions()},getTitle:function(e){if(!e||0===e.length)return"";var t="";return Array.isArray(e)&&e.forEach((function(r,i){i===e.length-1?t+=r.name:t+=r.name+"/"})),t},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var r=Object(J["a"])("userInfo")||{},i=r.uid,a={category:t.ruleForm.classify,year:t.ruleForm.year,name:t.ruleForm.name,director_ids:Object(P["b"])(t.ruleForm.director_list),program_id:Object(P["b"])(t.ruleForm.program),author_ids:Object(P["b"])(t.ruleForm.author_list),actor_ids:Object(P["b"])(t.ruleForm.actor_list),genre_ids:t.ruleForm.genre_list,douban_score:t.ruleForm.douban_score||"",episodes:1*t.ruleForm.episodes,minutes:1*t.ruleForm.minutes,total_minutes:1*t.ruleForm.total_minutes,date_published:t.ruleForm.date_published,region_ids:t.ruleForm.regions,languages:t.ruleForm.languages,alias:t.ruleForm.alias,imdb_id:t.ruleForm.imdb_id,storyline:t.ruleForm.storyline,user_id:i,is_divided:t.ruleForm.is_divided};"new"===t.dialogType?(a.img=t.ruleForm.img,t.imdbAdd(a)):"edit"===t.dialogType&&(a.media_id=t.ruleForm.id,t.imdbEdit(a))}))},imdbEdit:function(e){var t=this;return Object(u["a"])(Object(s["a"])().mark((function r(){var i;return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch("media/imdbEdit",e);case 2:i=r.sent,i&&0===i.code&&(t.dialogVisible=!1,t.$message.success("修改成功"),t.imdbSearch());case 4:case"end":return r.stop()}}),r)})))()},imdbAdd:function(e){var t=this;return Object(u["a"])(Object(s["a"])().mark((function r(){var i;return Object(s["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$store.dispatch("media/imdbAdd",e);case 2:i=r.sent,i&&0===i.code&&(t.dialogVisible=!1,t.$message.success("新增成功"),t.imdbSearch());case 4:case"end":return r.stop()}}),r)})))()},handelBlur:function(){this.getFormDiv()},getFormDiv:function(){var e,t=Object(c["a"])(this.list);try{for(t.s();!(e=t.n()).done;){var r=e.value;this.ruleFormDiv[r.key]=r.value}}catch(i){t.e(i)}finally{t.f()}},submitDiv:function(e){var t=this;this.getFormDiv(),this.$refs[e].validate(function(){var e=Object(u["a"])(Object(s["a"])().mark((function e(r){var i;return Object(s["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!r){e.next=7;break}return e.next=3,t.$store.dispatch("injector/imdbGenerateEpisode",{media_id:t.ruleFormDiv.media_id,start:t.ruleFormDiv.start,total:t.ruleFormDiv.total,storyline:t.ruleFormDiv.storyline,episode_horpic:t.ruleFormDiv.episode_horpic,horpic_size:t.ver_size});case 3:i=e.sent,i&&0===i.code&&(t.dialogVisibleDiv=!1,t.$message.success("操作成功")),e.next=8;break;case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},K=W,Y=(r("74c9"),Object(y["a"])(K,l,o,!1,null,"27009bc6",null)),X=Y.exports,Z={name:"mediaResource",components:{mRComponent:X}},ee=Z,te=Object(y["a"])(ee,i,a,!1,null,"706f868c",null);t["default"]=te.exports},"48ed":function(e,t,r){},"4e82":function(e,t,r){"use strict";var i=r("23e7"),a=r("1c0b"),l=r("7b0b"),o=r("d039"),n=r("a640"),s=[],u=s.sort,c=o((function(){s.sort(void 0)})),d=o((function(){s.sort(null)})),m=n("sort"),p=c||!d||!m;i({target:"Array",proto:!0,forced:p},{sort:function(e){return void 0===e?u.call(l(this)):u.call(l(this),a(e))}})},"74c9":function(e,t,r){"use strict";r("85b6")},7592:function(e,t,r){"use strict";r("d6a3")},"75e9":function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a}));r("fb6a");var i=[{value:"REGION",label:"区域"},{value:"PCWEB",label:"平台"},{value:"IPTV",label:"IPTV"},{value:"OTT",label:"OTT"},{value:"SOTT",label:"专网OTT"},{value:"DTV",label:"数字电视"},{value:"TV",label:"电视台"},{value:"AUDIO",label:"音频平台"}],a=i.slice(1)},"7a4a":function(e,t,r){"use strict";r("2305")},"85b6":function(e,t,r){},"90f1":function(e,t,r){},b4a8:function(e,t,r){"use strict";r("90f1")},bafd:function(e,t,r){"use strict";var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"fetch-suggestions":e.querySearchAsync,"trigger-on-focus":!1,"popper-class":"my-autocomplete",placeholder:"请输入内容",clearable:"",type:"text",maxlength:100,"show-word-limit":""},on:{select:e.handleSelect},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.item;return[r("div",{staticClass:"flex-box"},[r("div",{staticClass:"left"},[r("el-image",{staticStyle:{width:"40px"},attrs:{src:i.img}})],1),r("div",{staticClass:"right"},[r("div",{staticClass:"name"},[r("span",[e._v(e._s(i.title))]),r("span",{staticClass:"ml-7 gray"},[e._v(e._s(i.year))])]),r("span",{staticClass:"addr"},[e._v(e._s(i.sub_title))])])])]}}]),model:{value:e.state,callback:function(t){e.state="string"===typeof t?t.trim():t},expression:"state"}})],1)},a=[],l=r("c7eb"),o=r("1da1"),n=(r("498a"),{name:"autocomplete",model:{prop:"give",event:"returnBack"},props:{give:{type:String,default:function(){return""}},syncDetails:{type:Boolean,default:function(){return!1}},onSuccess:{type:Function}},data:function(){return{state:""}},watch:{state:{handler:function(e){this.$emit("returnBack",e)}},give:{handler:function(e){this.state=e}}},methods:{querySearchAsync:function(e,t){var r=this;return Object(o["a"])(Object(l["a"])().mark((function i(){var a;return Object(l["a"])().wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(e.trim()){i.next=3;break}return t([]),i.abrupt("return");case 3:return i.next=5,r.$store.dispatch("media/imdbSearchDouban",{wd:e});case 5:a=i.sent,a&&0===a.code&&t(a.data||[]);case 7:case"end":return i.stop()}}),i)})))()},handleSelect:function(e){var t=this;return Object(o["a"])(Object(l["a"])().mark((function r(){var i;return Object(l["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.state=e.title,!t.syncDetails){r.next=6;break}return r.next=4,t.$store.dispatch("media/imdbDetailDouban",{douban_id:e.id});case 4:i=r.sent,i&&0===i.code&&t.onSuccess&&t.onSuccess(i.data||{});case 6:case"end":return r.stop()}}),r)})))()}}}),s=n,u=(r("f751"),r("2ee2"),r("2877")),c=Object(u["a"])(s,i,a,!1,null,"52111008",null);t["a"]=c.exports},bec9:function(e,t,r){"use strict";r.d(t,"e",(function(){return i})),r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return n}));r("4de4"),r("d3b7"),r("99af");function i(){return"mobile"===this.$store.getters.device?"0px":this.$store.getters.sidebar.opened?"210px":"54px"}var a={region:"oss-cn-hangzhou",bucket:"senyu-img"};function l(e,t){var r=e.filter((function(e){return e.value===t}));return r.length?r[0]:{}}function o(e){var t=parseInt(e),r=Math.floor(t/3600)<10?"0"+Math.floor(t/3600):Math.floor(t/3600),i=Math.floor(t/60%60)<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60),a=Math.floor(t%60)<10?"0"+Math.floor(t%60):Math.floor(t%60),l="";return l+="".concat(r,":"),l+="".concat(i,":"),l+="".concat(a),l}function n(e){if(!e)return"";var t=new Image;return t.src=e,new Promise((function(e){if(t.complete){var r=t.width,i=t.height,a="".concat(r,"x").concat(i);e({size:a,width:r,height:i})}else t.onload=function(){var r=t.width,i=t.height,a="".concat(r,"x").concat(i);e({size:a,width:r,height:i})},t.onerror=function(){e()}}))}},d6a3:function(e,t,r){},efeca:function(e,t,r){"use strict";r.d(t,"i",(function(){return i})),r.d(t,"k",(function(){return a})),r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return o})),r.d(t,"e",(function(){return n})),r.d(t,"f",(function(){return s})),r.d(t,"c",(function(){return u})),r.d(t,"d",(function(){return c})),r.d(t,"g",(function(){return d})),r.d(t,"j",(function(){return m})),r.d(t,"h",(function(){return b})),r.d(t,"l",(function(){return v}));var i=[{value:"movie",label:"电影"},{value:"tvseries",label:"电视剧"},{value:"animation",label:"动漫"},{value:"animation_movie",label:"动漫电影"},{value:"web_movie",label:"网络电影"},{value:"sport",label:"体育"},{value:"travel",label:"旅游"},{value:"web_tv",label:"网剧"},{value:"variety",label:"综艺"},{value:"education",label:"教育"},{value:"mother_baby",label:"母婴"},{value:"game",label:"游戏"},{value:"short_film",label:"短片"},{value:"documentary",label:"纪录片"},{value:"square_dance",label:"广场舞"},{value:"SPECIAL_COLUMN",label:"专栏题目"},{value:"children",label:"儿童"},{value:"opera",label:"戏曲"},{value:"LIFE",label:"生活"},{value:"FILM",label:"影视"}],a=[{value:"剧场版",label:"剧场版"},{value:"TV版",label:"TV版"},{value:"真人版",label:"真人版"},{value:"DVD版",label:"DVD版"}],l=[{value:"Ⅰ",label:"适合任何年龄的人观看"},{value:"Ⅱ",label:"13岁以下不宜观看"},{value:"ⅡA",label:"13岁以下，建议有家长陪同观看"},{value:"ⅡB",label:"18岁以下，建议有家长陪同观看"},{value:"Ⅲ",label:"18岁以上"}],o=[{value:1,label:"仅包含H.264"},{value:2,label:"仅包含H.265"},{value:3,label:"包含H.264和H.265"}],n=[{value:"1",label:"正片"},{value:"2",label:"片花"},{value:"3",label:"预告片"},{value:"4",label:"其他"}],s=[{value:2,label:"流畅 320P"},{value:3,label:"标清 480P"},{value:4,label:"高清 720P"},{value:5,label:"全高清 1080P"},{value:10,label:"蓝光 4K"}],u=[{value:1,label:"转码已发起"},{value:2,label:"转码中"},{value:3,label:"转码完成"},{value:4,label:"转码失败",refill:!0},{value:11,label:"介质注入已发起"},{value:12,label:"介质注入中"},{value:13,label:"介质注入完成"},{value:14,label:"介质注入失败",refill:!0},{value:21,label:"信息注入已发起"},{value:22,label:"信息注入中"},{value:23,label:"信息注入完成"},{value:24,label:"信息注入失败",refill:!0}],c=[{value:"Provider",label:"卖方"},{value:"Customer",label:"买方"}],d=[{value:"Provider",label:"上游"},{value:"Customer",label:"下游"},{value:"Both",label:"上下游"}],m=[{value:1,label:"重要"},{value:3,label:"正常"},{value:4,label:"暂缓"}],p={only:[{label:"第几集",key:"start",prop:"start",value:""},{label:"总集数",key:"total",value:"1",hidden:!0}],double:[{label:"开始集数",key:"start",prop:"start",value:""},{label:"总集数",key:"total",prop:"total",value:""}],pattern:[{label:"多集创建",key:"double"},{label:"单集创建",key:"only"}]},f={only:[{label:"开始集数",key:"start",value:"1",disabled:!0},{label:"总集数",key:"total",value:"1",disabled:!0}],pattern:[{label:"单集创建",key:"only"}]},h={only:[{label:"第几期",key:"start",prop:"start",value:""},{label:"总期数",key:"total",value:"1",hidden:!0}],pattern:[{label:"单集创建",key:"only"}]},b={tvseries:p,animation:p,web_tv:p,movie:f,animation_movie:f,web_movie:f,variety:h,sport:p,travel:p,education:p,mother_baby:p,game:p,short_film:p,documentary:p,square_dance:p,SPECIAL_COLUMN:p,children:p},v=[{value:1,label:"是"},{value:0,label:"否"},{value:2,label:"未知"}]},f751:function(e,t,r){"use strict";r("33b6")}}]);