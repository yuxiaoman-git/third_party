(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33ba94dd"],{"07ac":function(e,t,a){var l=a("23e7"),n=a("6f53").values;l({target:"Object",stat:!0},{values:function(e){return n(e)}})},"09f4":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),Math.easeInOutQuad=function(e,t,a,l){return e/=l/2,e<1?a/2*e*e+t:(e--,-a/2*(e*(e-2)-1)+t)};var l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();function n(e){document.documentElement.scrollTop=e,document.body.parentNode.scrollTop=e,document.body.scrollTop=e}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function r(e,t,a){var r=o(),i=e-r,u=20,s=0;t="undefined"===typeof t?500:t;var c=function e(){s+=u;var o=Math.easeInOutQuad(s,r,i,t);n(o),s<t?l(e):a&&"function"===typeof a&&a()};c()}},"6f53":function(e,t,a){var l=a("83ab"),n=a("df75"),o=a("fc6a"),r=a("d1e7").f,i=function(e){return function(t){var a,i=o(t),u=n(i),s=u.length,c=0,v=[];while(s>c)a=u[c++],l&&!r.call(i,a)||v.push(e?[a,i[a]]:i[a]);return v}};e.exports={entries:i(!0),values:i(!1)}},"75e9":function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return n}));a("fb6a");var l=[{value:"REGION",label:"区域"},{value:"PCWEB",label:"平台"},{value:"IPTV",label:"IPTV"},{value:"OTT",label:"OTT"},{value:"SOTT",label:"专网OTT"},{value:"DTV",label:"数字电视"},{value:"TV",label:"电视台"},{value:"AUDIO",label:"音频平台"}],n=l.slice(1)},bec9:function(e,t,a){"use strict";a.d(t,"e",(function(){return l})),a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return r})),a.d(t,"d",(function(){return i}));a("4de4"),a("d3b7"),a("99af");function l(){return"mobile"===this.$store.getters.device?"0px":this.$store.getters.sidebar.opened?"210px":"54px"}var n={region:"oss-cn-hangzhou",bucket:"senyu-img"};function o(e,t){var a=e.filter((function(e){return e.value===t}));return a.length?a[0]:{}}function r(e){var t=parseInt(e),a=Math.floor(t/3600)<10?"0"+Math.floor(t/3600):Math.floor(t/3600),l=Math.floor(t/60%60)<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60),n=Math.floor(t%60)<10?"0"+Math.floor(t%60):Math.floor(t%60),o="";return o+="".concat(a,":"),o+="".concat(l,":"),o+="".concat(n),o}function i(e){if(!e)return"";var t=new Image;return t.src=e,new Promise((function(e){if(t.complete){var a=t.width,l=t.height,n="".concat(a,"x").concat(l);e({size:n,width:a,height:l})}else t.onload=function(){var a=t.width,l=t.height,n="".concat(a,"x").concat(l);e({size:n,width:a,height:l})},t.onerror=function(){e()}}))}},efeca:function(e,t,a){"use strict";a.d(t,"i",(function(){return l})),a.d(t,"k",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return i})),a.d(t,"f",(function(){return u})),a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return c})),a.d(t,"g",(function(){return v})),a.d(t,"j",(function(){return d})),a.d(t,"h",(function(){return p})),a.d(t,"l",(function(){return h}));var l=[{value:"movie",label:"电影"},{value:"tvseries",label:"电视剧"},{value:"animation",label:"动漫"},{value:"animation_movie",label:"动漫电影"},{value:"web_movie",label:"网络电影"},{value:"sport",label:"体育"},{value:"travel",label:"旅游"},{value:"web_tv",label:"网剧"},{value:"variety",label:"综艺"},{value:"education",label:"教育"},{value:"mother_baby",label:"母婴"},{value:"game",label:"游戏"},{value:"short_film",label:"短片"},{value:"documentary",label:"纪录片"},{value:"square_dance",label:"广场舞"},{value:"SPECIAL_COLUMN",label:"专栏题目"},{value:"children",label:"儿童"},{value:"opera",label:"戏曲"},{value:"LIFE",label:"生活"},{value:"FILM",label:"影视"}],n=[{value:"剧场版",label:"剧场版"},{value:"TV版",label:"TV版"},{value:"真人版",label:"真人版"},{value:"DVD版",label:"DVD版"}],o=[{value:"Ⅰ",label:"适合任何年龄的人观看"},{value:"Ⅱ",label:"13岁以下不宜观看"},{value:"ⅡA",label:"13岁以下，建议有家长陪同观看"},{value:"ⅡB",label:"18岁以下，建议有家长陪同观看"},{value:"Ⅲ",label:"18岁以上"}],r=[{value:1,label:"仅包含H.264"},{value:2,label:"仅包含H.265"},{value:3,label:"包含H.264和H.265"}],i=[{value:"1",label:"正片"},{value:"2",label:"片花"},{value:"3",label:"预告片"},{value:"4",label:"其他"}],u=[{value:2,label:"流畅 320P"},{value:3,label:"标清 480P"},{value:4,label:"高清 720P"},{value:5,label:"全高清 1080P"},{value:10,label:"蓝光 4K"}],s=[{value:1,label:"转码已发起"},{value:2,label:"转码中"},{value:3,label:"转码完成"},{value:4,label:"转码失败",refill:!0},{value:11,label:"介质注入已发起"},{value:12,label:"介质注入中"},{value:13,label:"介质注入完成"},{value:14,label:"介质注入失败",refill:!0},{value:21,label:"信息注入已发起"},{value:22,label:"信息注入中"},{value:23,label:"信息注入完成"},{value:24,label:"信息注入失败",refill:!0}],c=[{value:"Provider",label:"卖方"},{value:"Customer",label:"买方"}],v=[{value:"Provider",label:"上游"},{value:"Customer",label:"下游"},{value:"Both",label:"上下游"}],d=[{value:1,label:"重要"},{value:3,label:"正常"},{value:4,label:"暂缓"}],b={only:[{label:"第几集",key:"start",prop:"start",value:""},{label:"总集数",key:"total",value:"1",hidden:!0}],double:[{label:"开始集数",key:"start",prop:"start",value:""},{label:"总集数",key:"total",prop:"total",value:""}],pattern:[{label:"多集创建",key:"double"},{label:"单集创建",key:"only"}]},f={only:[{label:"开始集数",key:"start",value:"1",disabled:!0},{label:"总集数",key:"total",value:"1",disabled:!0}],pattern:[{label:"单集创建",key:"only"}]},m={only:[{label:"第几期",key:"start",prop:"start",value:""},{label:"总期数",key:"total",value:"1",hidden:!0}],pattern:[{label:"单集创建",key:"only"}]},p={tvseries:b,animation:b,web_tv:b,movie:f,animation_movie:f,web_movie:f,variety:m,sport:b,travel:b,education:b,mother_baby:b,game:b,short_film:b,documentary:b,square_dance:b,SPECIAL_COLUMN:b,children:b},h=[{value:1,label:"是"},{value:0,label:"否"},{value:2,label:"未知"}]},faeb:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"ruleForm",attrs:{inline:!0,size:"small",model:e.form,"label-width":"80px"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"媒体名称"}},[a("el-input",{staticClass:"filter-item",attrs:{placeholder:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"合作商"}},[a("SelectItme",{attrs:{type:"cooperative"},model:{value:e.form.cooperative,callback:function(t){e.$set(e.form,"cooperative",t)},expression:"form.cooperative"}})],1),a("el-form-item",{attrs:{label:"状态"}},[a("SelectItme",{attrs:{type:"TaskStatus"},model:{value:e.form.TaskStatus,callback:function(t){e.$set(e.form,"TaskStatus",t)},expression:"form.TaskStatus"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary","native-type":"submit"},nativeOn:{click:function(t){return t.preventDefault(),e.filterMsg(t)}}},[e._v(" 查询 ")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"max-content"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"60"}}),a("el-table-column",{attrs:{prop:"name",label:"文件名称",width:"230","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"分集序号",width:"100",prop:"episode_sn","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"分集标题",width:"200",prop:"episode_title","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"合作方",width:"100","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[a("span",[e._v(e._s(l.partner&&l.partner.name))])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"等级",width:"60","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[a("span",[e._v(e._s(1===l.level?"普通":2===l.level?"优先":3===l.level?"抢片":7===l.level?"定时":""))])]}}])}),a("el-table-column",{attrs:{label:"状态",width:"140","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[a("span",[e._v(e._s(e.filterItems(e.TaskStatus,l.status).label))])]}}])}),a("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"140","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"update_time",label:"更新时间",width:"140","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{prop:"remark",label:"备注",width:"200","show-overflow-tooltip":""}}),a("el-table-column",{attrs:{label:"操作",width:"180",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.row;return[a("div",{staticClass:"operate-btn"},[e.isRefill(l.status)&&e.$checkPermission(["edit"])?a("span",{on:{click:function(t){return e.handelInjector(l)}}},[e._v("重新注入")]):e._e(),l.is_show&&!l.in_pending&&e.$checkPermission(["edit"])?a("span",{on:{click:function(t){return e.handleUpdate(l)}}},[e._v("更新")]):e._e(),l.is_show&&!l.in_pending&&e.$checkPermission(["edit"])?a("span",{on:{click:function(t){return e.handleDel(l)}}},[e._v("删除")]):e._e()])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.listQuery.page,limit:e.listQuery.limit,layout:"total,sizes, prev, pager, next, jumper"},on:{"update:page":function(t){return e.$set(e.listQuery,"page",t)},"update:limit":function(t){return e.$set(e.listQuery,"limit",t)},pagination:e.getList}}),e.dialogInjectVisible?a("el-dialog",{attrs:{title:"发起注入",visible:e.dialogInjectVisible,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.dialogInjectVisible=t}}},[a("el-form",{ref:"injectRuleForm",attrs:{model:e.injectRuleForm,rules:e.injectRules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"合作商",prop:"cooperative"}},[a("el-input",{attrs:{disabled:"",placeholder:"请输入"},model:{value:e.injectRuleForm.cooperative,callback:function(t){e.$set(e.injectRuleForm,"cooperative",t)},expression:"injectRuleForm.cooperative"}})],1),a("el-form-item",{attrs:{label:"等级",prop:"taskLevel"}},[a("SelectItme",{attrs:{type:"taskLevel",width:"100%"},model:{value:e.injectRuleForm.taskLevel,callback:function(t){e.$set(e.injectRuleForm,"taskLevel",t)},expression:"injectRuleForm.taskLevel"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogInjectVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitInject("injectRuleForm")}}},[e._v("确 定")])],1)],1):e._e()],1)},n=[],o=a("c7eb"),r=a("1da1"),i=a("b85c"),u=(a("a9e3"),a("b0c0"),a("33a7")),s=a("73e5"),c=a("333d"),v=a("efeca"),d=a("bec9"),b={task_id:"",cooperative:null,taskLevel:1},f={name:"injectManage_",components:{SelectItme:s["a"],Pagination:c["a"],filterPane:u["a"]},data:function(){return{TaskStatus:v["c"],loading:!1,tableData:[],total:0,listQuery:{page:1,limit:20},dialogInjectVisible:!1,injectRuleForm:Object.assign({},b),injectRules:{taskLevel:[{required:!0,message:"请输入等级",trigger:"change"}]},form:{name:"",cooperative:null,TaskStatus:null},filterData:{elinput:[{name:"媒体名称",key:"name"}],elselect:[{name:"合作商",key:"cooperative",type:"cooperative"},{name:"状态",key:"TaskStatus",type:"TaskStatus"}]},selectedFilter:{}}},mounted:function(){this.$route.query.cooperative&&(this.form.cooperative=Number(this.$route.query.cooperative)),this.$route.query.name&&(this.form.name=this.$route.query.name),this.injectorTaskSearch()},methods:{filterItems:d["b"],filterMsg:function(){this.listQuery.page=1,this.injectorTaskSearch()},isRefill:function(e){var t,a=Object(i["a"])(v["c"]);try{for(a.s();!(t=a.n()).done;){var l=t.value;if(l.value==e&&l.refill)return!0}}catch(n){a.e(n)}finally{a.f()}return!1},getList:function(){this.injectorTaskSearch()},handelSearch:function(){this.listQuery.page=1,this.injectorTaskSearch()},injectorTaskSearch:function(){var e=this;return Object(r["a"])(Object(o["a"])().mark((function t(){var a,l,n,r,i,u,s,c,v,d;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.form,l=a.name,n=a.cooperative,r=a.TaskStatus,i=e.listQuery,u=i.page,s=i.limit,c={storage_name:l,partner_id:n||0,task_status:r||void 0,page:u,page_size:s},e.loading=!0,t.next=6,e.$store.dispatch("injector/injectorTaskSearch",c);case 6:v=t.sent,e.loading=!1,0===v.code&&(d=v.data||{},e.total=d.total_item,e.tableData=d.data_list);case 9:case"end":return t.stop()}}),t)})))()},handelInjector:function(e){this.injectRuleForm=Object.assign({},b),this.dialogInjectVisible=!0,this.injectRuleForm.task_id=e.id,e.partner&&(this.injectRuleForm.cooperative=e.partner.name)},submitInject:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(r["a"])(Object(o["a"])().mark((function e(a){var l,n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=6;break}return l={task_id:t.injectRuleForm.task_id,level:t.injectRuleForm.taskLevel},e.next=4,t.$store.dispatch("injector/injectorTaskReAdd",l);case 4:n=e.sent,0===n.code&&(t.$message.success("注入已发起"),t.dialogInjectVisible=!1,t.injectorTaskSearch());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},handleDel:function(e){var t=this;this.$confirm("确认发起工单删除操作?","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",type:"warning"}).then(Object(r["a"])(Object(o["a"])().mark((function a(){var l;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("injector/media_remove",{task_id:e.id});case 2:l=a.sent,l&&0===l.code&&(t.$message.success("删除成功"),t.injectorTaskSearch());case 4:case"end":return a.stop()}}),a)})))).catch((function(){}))},handleUpdate:function(e){var t=this;this.$confirm("确认发起工单更新操作?","提示",{confirmButtonText:"确 定",cancelButtonText:"取 消",type:"warning"}).then(Object(r["a"])(Object(o["a"])().mark((function a(){var l;return Object(o["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$store.dispatch("injector/media_update",{task_id:e.id});case 2:l=a.sent,l&&0===l.code&&(t.$message.success("更新成功"),t.injectorTaskSearch());case 4:case"end":return a.stop()}}),a)})))).catch((function(){}))}}},m=f,p=a("2877"),h=Object(p["a"])(m,l,n,!1,null,null,null);t["default"]=h.exports}}]);